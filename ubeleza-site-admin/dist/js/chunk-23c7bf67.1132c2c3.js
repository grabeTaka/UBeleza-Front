(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23c7bf67"],{1141:function(e,t,s){},6387:function(e,t,s){"use strict";var a=s("1141"),i=s.n(a);i.a},e11f:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"white--text pa-3",attrs:{color:"green"}},[s("v-row",[s("v-col",{attrs:{cols:"10"}},[s("h3",{staticClass:"title font-weight-light"},[e._v(" "+e._s(e.title)+" ")])]),s("v-col",{attrs:{cols:"2"}},[s("v-btn",{attrs:{to:"/admin/establishments",color:"blueButtons",dark:""}},[e._v(" Voltar ")])],1)],1)],1)],1),s("v-col",{attrs:{cols:"12"}},[s("form",{staticClass:"pl-5 pr-5 pb-6 form-config"},[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[e.edit?s("v-img",{staticClass:"grey lighten-2",attrs:{src:e.current_avatar,"aspect-ratio":"1","max-width":"250","max-height":"150"}}):e._e(),s("v-file-input",{attrs:{label:"Avatar do Estabelecimento"},model:{value:e.avatar,callback:function(t){e.avatar=t},expression:"avatar"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[e.edit?s("v-img",{staticClass:"grey lighten-2",attrs:{src:e.current_cover,"aspect-ratio":"1","max-width":"250","max-height":"150"}}):e._e(),s("v-file-input",{attrs:{label:"Capa do Estabelecimento"},model:{value:e.cover,callback:function(t){e.cover=t},expression:"cover"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{"error-messages":e.establishmentNameErrors,label:"Nome do Estabelecimento",required:""},on:{input:function(t){return e.$v.establishment.name.$touch()},blur:function(t){return e.$v.establishment.name.$touch()}},model:{value:e.establishment.name,callback:function(t){e.$set(e.establishment,"name",t)},expression:"establishment.name"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{"error-messages":e.establishmentDocumentErrors,label:"Documento",required:""},on:{input:function(t){return e.$v.establishment.details.document.$touch()},blur:function(t){return e.$v.establishment.details.document.$touch()}},model:{value:e.establishment.details.document,callback:function(t){e.$set(e.establishment.details,"document",t)},expression:"establishment.details.document"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-textarea",{attrs:{"error-messages":e.establishmentBusinessHoursErrors,name:"input-7-1",label:"Horário de Funcionamento",rows:"2",required:""},on:{input:function(t){return e.$v.establishment.details.business_hours.$touch()},blur:function(t){return e.$v.establishment.details.business_hours.$touch()}},model:{value:e.establishment.details.business_hours,callback:function(t){e.$set(e.establishment.details,"business_hours",t)},expression:"establishment.details.business_hours"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-textarea",{attrs:{"error-messages":e.establishmentDescriptionErrors,name:"input-7-1",label:"Descrição",rows:"2",required:""},on:{input:function(t){return e.$v.establishment.details.description.$touch()},blur:function(t){return e.$v.establishment.details.description.$touch()}},model:{value:e.establishment.details.description,callback:function(t){e.$set(e.establishment.details,"description",t)},expression:"establishment.details.description"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"E-mail",type:"email"},model:{value:e.establishment.details.email,callback:function(t){e.$set(e.establishment.details,"email",t)},expression:"establishment.details.email"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Site"},model:{value:e.establishment.details.site,callback:function(t){e.$set(e.establishment.details,"site",t)},expression:"establishment.details.site"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Facebook"},model:{value:e.establishment.details.facebook,callback:function(t){e.$set(e.establishment.details,"facebook",t)},expression:"establishment.details.facebook"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Instagram"},model:{value:e.establishment.details.instagram,callback:function(t){e.$set(e.establishment.details,"instagram",t)},expression:"establishment.details.instagram"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Twitter"},model:{value:e.establishment.details.twitter,callback:function(t){e.$set(e.establishment.details,"twitter",t)},expression:"establishment.details.twitter"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{"error-messages":e.establishmentPhoneErrors,label:"Telefone"},model:{value:e.establishment.details.phone,callback:function(t){e.$set(e.establishment.details,"phone",t)},expression:"establishment.details.phone"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{"error-messages":e.addressCepErrors,label:"CEP",required:""},on:{input:function(t){return e.$v.address.cep.$touch()},blur:function(t){e.$v.address.cep.$touch(),e.getAddressByCEP()}},model:{value:e.address.cep,callback:function(t){e.$set(e.address,"cep",t)},expression:"address.cep"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Cidade",disabled:""},model:{value:e.address.city,callback:function(t){e.$set(e.address,"city",t)},expression:"address.city"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Bairro",disabled:""},model:{value:e.address.neighborhood,callback:function(t){e.$set(e.address,"neighborhood",t)},expression:"address.neighborhood"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Rua",disabled:""},model:{value:e.address.street,callback:function(t){e.$set(e.address,"street",t)},expression:"address.street"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Número",required:""},model:{value:e.address.number,callback:function(t){e.$set(e.address,"number",t)},expression:"address.number"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Complemento",disabled:""},model:{value:e.address.complement,callback:function(t){e.$set(e.address,"complement",t)},expression:"address.complement"}})],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.beforeSubmit}},[e._v(" "+e._s(e.button_action)+" ")]),s("v-btn",{attrs:{color:"error"},on:{click:e.clear}},[e._v(" Cancelar ")])],1)],1)],1)])],1)],1)},i=[],r=s("be3b"),l=s("1dce"),o=s("b5ae"),n={mixins:[l["validationMixin"]],validations:{establishment:{name:{required:o["required"]},details:{document:{required:o["required"]},business_hours:{required:o["required"]},description:{required:o["required"]},email:{required:o["required"]},site:{required:o["required"]},facebook:{required:o["required"]},instagram:{required:o["required"]},twitter:{required:o["required"]},phone:{required:o["required"]}}},address:{cep:{required:o["required"]},city:{required:o["required"]}}},components:{},mounted(){this.establishment_id=this.$route.params.id,this.establishment_id&&(this.edit=!0,this.title="Editar Estabelecimento",this.button_action="Editar",this.getEstablishment())},data:()=>({establishment:{name:"",details:{document:"",business_hours:"",description:"",email:"",site:"",facebook:"",instagram:"",twitter:"",phone:""}},address:{cep:"",city:"",neighborhood:"",street:"",number:"",complement:"",uf:""},avatar:[],cover:[],editAddress:!1,loadingAddress:!1,establishment_id:null,edit:!1,title:"Novo Estabelecimento",button_action:"Cadastrar",current_avatar:"",current_cover:""}),computed:{establishmentNameErrors(){const e=[];return this.$v.establishment.name.$dirty?(!this.$v.establishment.name.required&&e.push("Insira o nome do Estabelecimento."),e):e},establishmentDocumentErrors(){const e=[];return this.$v.establishment.details.document.$dirty?(!this.$v.establishment.details.document.required&&e.push("Insira o documento do Estabelecimento."),e):e},establishmentBusinessHoursErrors(){const e=[];return this.$v.establishment.details.business_hours.$dirty?(!this.$v.establishment.details.business_hours.required&&e.push("Insira o Horário de funcionamento do Estabelecimento."),e):e},establishmentDescriptionErrors(){const e=[];return this.$v.establishment.details.description.$dirty?(!this.$v.establishment.details.description.required&&e.push("Insira uma descrição para o Estabelecimento."),e):e},establishmentPhoneErrors(){const e=[];return this.$v.establishment.details.phone.$dirty?(!this.$v.establishment.details.phone.required&&e.push("Insira o número do Estabelecimento."),e):e},addressCepErrors(){const e=[];return this.$v.address.cep.$dirty?(!this.$v.address.cep.required&&e.push("Insira o cep do Estabelecimento."),e):e},addressCityErrors(){const e=[];return this.$v.address.city.$dirty?(!this.$v.address.city.required&&e.push("Insira a cidade do Estabelecimento."),e):e}},methods:{handleFilesUploads(){this.files=this.$refs.files.files},beforeSubmit(){this.$v.$touch(),this.$v.$invalid||this.submit()},async submit(){let e=null,t=new FormData;t.append("establishment",JSON.stringify(this.establishment)),t.append("address",JSON.stringify(this.address)),t.append("cover",this.cover),t.append("avatar",this.avatar),t.append("access_token",localStorage.getItem("access_token")),this.edit?await r["b"].patch(`/api/v1/establishments/${this.establishment_id}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{e=t}).catch(t=>{e=t}):await r["b"].post("/api/v1/establishments",t,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{e=t}).catch(t=>{e=t}),201==e.status&&this.clear()},async getAddressByCEP(){console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),console.log("XXXXXXXXXXXXXXXXXXXXXXX");let e=null;this.address.street="",this.address.district="",this.address.state="",this.address.city="",this.cepError=!1,this.address.cep&&(this.loadingAddress=!0,await r["a"].get(`https://viacep.com.br/ws/${this.address.cep}/json/`).then(t=>{e=t}).catch(t=>{e=t}),200==e.status&&(console.log("++++++++++++++++++++"),console.log("++++++++++++++++++++"),console.log("++++++++++++++++++++"),console.log("++++++++++++++++++++"),this.address.neighborhood=e.data.bairro,this.address.complement=e.data.complemento,this.address.city=e.data.localidade,this.address.street=e.data.logradouro,this.address.uf=e.data.uf),this.editAddress=!1,this.loadingAddress=!1)},clear(){this.$v.$reset(),this.establishment={name:"",details:{document:"",business_hours:"",description:"",email:"",site:"",facebook:"",instagram:"",twitter:"",phone:""}},this.address={cep:"",city:"",neighborhood:"",street:"",number:"",complement:""},this.avatar=[],this.cover=[],this.$router.push("/admin/establishments")},async getEstablishment(){let e=null;await r["b"].get(`/api/v1/establishments/${this.establishment_id}`,{params:{access_token:localStorage.getItem("access_token")}}).then(t=>{e=t}).catch(t=>{e=t}),200==e.status&&(this.establishment={name:e.data.name,details:e.data.details},this.current_avatar=e.data.avatar,this.current_cover=e.data.cover,this.address=e.data.address)}}},d=n,c=(s("6387"),s("2877")),m=s("6544"),X=s.n(m),u=s("8336"),h=s("b0af"),b=s("62ad"),v=s("a523"),p=s("23a7"),f=s("adda"),$=s("0fd9"),g=s("8654"),x=s("a844"),_=Object(c["a"])(d,a,i,!1,null,"4227d0b3",null);t["default"]=_.exports;X()(_,{VBtn:u["a"],VCard:h["a"],VCol:b["a"],VContainer:v["a"],VFileInput:p["a"],VImg:f["a"],VRow:$["a"],VTextField:g["a"],VTextarea:x["a"]})}}]);
//# sourceMappingURL=chunk-23c7bf67.1132c2c3.js.map